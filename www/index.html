<!DOCTYPE html>
<html>

    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
        <meta name="viewport" content="target-densitydpi=device-dpi" />

        <title>Astro - Mobile Template</title>

        <style>
            @font-face {
                font-family: 'Roboto thin';
                font-style: normal;
                font-weight: 100;
                src: url(fonts/roboto-100.woff2) format('woff');
            }
            @font-face {
                font-family: 'Roboto regular';
                font-style: normal;
                font-weight: 300;
                src: url(fonts/roboto-300.woff2) format('woff');
            }
            @font-face {
                font-family: 'Roboto bold';
                font-style: normal;
                font-weight: 400;
                src: url(fonts/roboto-400.woff2) format('woff');
            }

            @font-face {
                font-family: 'fontawesome';
                font-style: normal;
                src: url(fontawesome-webfont.woff) format('woff');
            }

            .icono {
                -moz-border-radius: 50%;
                -webkit-border-radius: 50%;
                border-radius: 50%;
                background-color: #0dcdbd;
                display: inline-block;
                height: 26px;
                margin-left: 5px;
                text-align: center;
                width: 26px;
            }

            .icono i {
                color: #fff;
                font-size: 10px;
                line-height: 27px;
            }
            .boton
            {
                min-width: 150px;
                padding: 10px;
                background: #c0c0c0;
                border-bottom: 2px solid #a0a0a0;
                color: #fff;
                font-size: 13px;
                cursor: pointer;	
                margin: 10px;
            }

        </style>
        <link href="fonts/font-awesome.css" rel="stylesheet" type="text/css">
        <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/mapa/bootstrap.css" type="text/css">

        <link rel="stylesheet" href="css/mapa/bootstrap-select.min.css" type="text/css">


        <link rel="stylesheet" href="css/mapa/jquery.mCustomScrollbar.css" type="text/css">
        <link rel="stylesheet" href="css/mapa/green.css" type="text/css">

        <style>
            .map-canvas .map .toggle-navigation {
                -moz-box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.05);
                -webkit-box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.05);
                box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.05);
                background-color: #f4f4f2;
                bottom: 0;
                height: 27px;
                margin: auto;
                /* position: absolute; */
                top: 0;
                z-index: 1;
                display: none;
            }
        </style>


        <link href="css/style.css" rel="stylesheet">


        <script type="text/javascript" src="js/jquery.js"></script>
        <script type="text/javascript" src="js/fastclick.js"></script>


        <script type="text/javascript">
            //<![CDATA[ 
            
            function SimularClick(idObjeto){
 
var nouEvent = document.createEvent("MouseEvents");
nouEvent.initMouseEvent("click", true, true, window,0, 0, 0, 0, 0, false, false, false, false, 0, null);
 
var objecto = document.getElementById(idObjeto);
var canceled = !objecto.dispatchEvent(nouEvent);
}

            function load_url(div, url)
            {
                $.ajax({
                    url: url,
                    cache: false,
                    type: 'GET',
                    contentType: "application/json",
                    async: true,
                    crossDomain: true,
                    success: function (data) {
                        $('#' + div).html(data);
                    }
                });
            }



            function activar_tipo(tipo)
            {
                document.getElementById('tipo_de_rincon').innerHTML = tipo;
            }

            //]]>
        </script>


    </head>
    <body>

        <div class="header">

            <div id="c-button--slide-left" class="c-button" style="width: 60px; height: 60px; position: fixed; left: 0px; top: 0px; cursor: pointer; background: url(img/menu1.png); background-position: center center; background-size: 28px; background-repeat: no-repeat;">
            </div>
            
            <div id="volver_atras" class="modal-close" style="width: 60px; height: 60px; position: fixed; left: 0px; top: 0px; cursor: pointer; background: url(img/arrow_left.png); background-position: center center; background-size: 28px; background-repeat: no-repeat; display: none;">
            </div>

            <img src="img/misrincones.png" style="width: 170px; margin-top: 13px;">



            <div id="c-button--slide-right" class="c-button" style="width: 60px; height: 60px; position: fixed; right: 0px; top: 0px; cursor: pointer; background: url(img/gps_big.png); background-position: center center; background-size: 28px; background-repeat: no-repeat;">
            </div>



        </div>




        <div id="o-wrapper" class="o-wrapper">
            <div id="contenido">

                <div style="width: 100%; height: 100%; position: fixed; top: 0px; left: 0px; background: url(img/bg0.jpg) no-repeat fixed;
                     background-position: top left; background-size: cover; z-index: 10" id="portada">

                    <div class="pattern" style="background: rgba(0,0,0,0.5)"></div>  

                    <div class="centrado-porcentual">
                        <h6 style="font-size: 36px;">Mis Rincones
                        </h6>
                        <h6>Otra forma de ver el mundo que te rodea</h6>
                        <br><br>
                        <h6><a onclick="$('#portada').hide();" class="boton_full" style="text-decoration: none; color: #fff; font-size: 15px; margin-right: 20px; cursor: pointer;">ENTRAR</a>

                    </div>
                </div>  












                <div id="page-canvas" style="z-index: 1; margin-top: 0px; overflow: hidden;">




                    <!--Page Content-->
                    <div id="page-content">
                        <!-- Map Canvas-->
                        <div class="map-canvas list-solid" style="width: 100%; height: 100%; position: fixed; top: 50px; left: 0px;">
                            <!-- Map -->
                            <div class="map">


                                <div style="width: 40px; heigh: 40px; background: #fff; position: absolute; left: 10px; top: 70px; cursor: pointer; padding: 6px; border-radius: 2px; z-index:100" class="sombra" onclick="crear_mapa_json('todos');">
                                    <img src="img/icono_gps.png" style="width: 40px">
                                </div>


                                <header class="clearfix" style="border: 0px; width: 230px; padding: 0px; position: absolute; right: 6px; top: 64px; cursor: pointer; padding: 6px; border-radius: 2px; z-index:100">

                                    <div class="btn-group bootstrap-select framed sombra" style="padding: 0px;">
                                        <button type="button" class="btn dropdown-toggle selectpicker btn-default" data-toggle="dropdown" style="border: 0px; border-radius: 2px;">
                                            <span class="filter-option pull-left" id="tipo_de_rincon">Elije tus rincones</span><span><img src="img/arrow_down.png" style="width: 20px; position: relative; right: 6px;"></span>
                                        </button>
                                        <div class="dropdown-menu open animation-fade-in" style="max-height: 530px; overflow: hidden; min-height: 111px;">
                                            <ul class="dropdown-menu inner selectpicker animation-fade-in" role="menu" style="max-height: 330px; overflow-y: auto; min-height: 111px;">

                                                <li>
                                                    <a tabindex="0" class="" style="font-size: 13px;" onclick="activar_tipo('Todos los rincones'); crear_mapa_json('todos');"><span class="text">Todos los rincones</span><i class="glyphicon glyphicon-ok icon-ok check-mark"></i></a>
                                                </li>    

                                                <li>
                                                    <a tabindex="0" class="" style="font-size: 13px;" onclick="activar_tipo('Rincones imprescindibles'); crear_mapa_json('imprescindibles');"><span class="text">Rincones imprescindibles</span><i class="glyphicon glyphicon-ok icon-ok check-mark"></i></a>
                                                </li>

                                                <li>
                                                    <a tabindex="0" class="" style="font-size: 13px;" onclick="activar_tipo('Rincones para comer'); crear_mapa_json('para_comer');"><span class="text">Rincones para comer</span><i class="glyphicon glyphicon-ok icon-ok check-mark"></i></a>
                                                </li>

                                                <li>
                                                    <a tabindex="0" class="" style="font-size: 13px;" onclick="activar_tipo('Rincones para comprar'); crear_mapa_json('para_comprar');"><span class="text">Rincones para comprar</span><i class="glyphicon glyphicon-ok icon-ok check-mark"></i></a>
                                                </li>

                                            </ul>
                                        </div>

                                    </div>

                                </header>


                                <!--/.toggle-navigation-->
                                <div id="map" style="width: 100%; height: 100%; margin-top: -50px;"></div>




                    <div id="loading" class="centrado-porcentual" style="z-index: 9999; display: none; width: 200px; background: #ffffff;">
                
                        <div style="width: 200px; padding: 20px; background: #fff; color: #666; text-align: center;" class="sombra">
                            <img src="img/loading.svg" style="width: 32px; margin-right: 20px;"> Cargando ...
                        </div>
                        
                    </div>
                                
                            </div>
                            <!-- end Map -->
                            <!--Items List-->




                         
                        </div>
                        <!-- end Map Canvas-->





                    </div>
                    <!-- end Page Content-->
                </div>
                <!-- end Page Canvas-->













            </div>
        </div><!-- /o-wrapper -->


        <!-- /c-menu slide-left -->
        <nav id="c-menu--slide-left" class="c-menu c-menu--slide-left sombra" style="background-color:#207a80; border-right: 2px solid #0dcdbd;">

            
             <nav class="main-nav">
                <ul>
                    <li class="icono_menu_izquierda"><a class="c-menu__close" id="cerrar_izquierda"><img src="img/iconos1/cerrar.png" alt="" title="" style="width: 60px;"></a></li>
                  <li class="icono_menu_izquierda" style="padding: 0px;"><img src="img/avatar.png" alt="" title="" style="width: 60px;"></li>
                  <li class="icono_menu_izquierda"><img src="img/iconos1/mapa.png" alt="" title=""></li>
                  <li class="icono_menu_izquierda" onclick="nuevo_rincon();"><img src="img/iconos1/nuevo_rincon.png" alt="" title=""></li>
                  <li class="icono_menu_izquierda"><img src="img/iconos1/perfil.png" alt="" title=""></li>
                  <li class="icono_menu_izquierda"><img src="img/iconos1/login.png" alt="" title=""></li>
                  <li class="icono_menu_izquierda"><img src="img/iconos1/crear_perfil.png" alt="" title=""></li>
                  <li class="icono_menu_izquierda"><img src="img/iconos1/configuracion.png" alt="" title=""></li>
                </ul>
              </nav>
            
            
   



            <script>
                document.addEventListener("deviceready", onDeviceReady, false);
                function onDeviceReady() {
                    console.log("navigator.geolocation works well");
                }

                // onSuccess Callback 
                // This method accepts a Position object, which contains the 
                // current GPS coordinates 
                // 
                var onSuccess = function (position) {

                    var latitud = position.coords.latitude;
                    var longitud = position.coords.longitude;
                }

                // onError Callback receives a PositionError object 
                // 
                function onError(error) {
                    alert('code: ' + error.code + '\n' +
                            'message: ' + error.message + '\n');
                }

                navigator.geolocation.getCurrentPosition(onSuccess, onError);
            </script>



        </nav>
        <!-- /c-menu slide-left -->


        <!-- /c-menu slide-right -->
        <nav id="c-menu--slide-right" class="c-menu c-menu--slide-right sombra" style="background: #ffffff; border-left: 2px solid #0dcdbd;">

            <a class="c-menu__close" id="cerrar_derecha" style="background: #61c6cc; width: 100%; cursor: pointer; position: fixed; top: 0px; left: 0px; z-index: 999; padding: 10px;">
                <img src="img/iconos1/cerrar.png" style="width: 40px; margin-right: 20px;"><font style="color: #ffffff;">Rincones cerca de ti</font>
            </a>


            <div id="contenido_menu_derecha" class="contenido_menu_derecha" style="padding: 0px;">

                <div class="items-list" style="width: 100%; background: #ffffff;">
 
                    <div class="scroller1" style="width: 100%; background: #ffffff;">
                        <ul class="results grid" style="padding-bottom: 50px; padding-top: 74px;">

                        </ul>
                        <div class="scroller__track">
                            <div class="scroller__bar"></div>
                        </div>

                    </div>    
                </div>

            </div>



        </nav>




        <nav id="c-menu--push-bottom" class="c-menu c-menu--push-bottom">
            <button class="c-menu__close"><strong>x</strong></button>




        </nav><!-- /c-menu push-bottom -->


        <!-- /c-menu slide-right -->

        <div id="c-mask" class="c-mask"></div><!-- /c-mask -->


        <script type="text/javascript" src="js/menu.js"></script>
        <script>

                /**
                 * Slide left instantiation and action.
                 */
                var slideLeft = new Menu({
                    wrapper: '#o-wrapper',
                    type: 'slide-left',
                    menuOpenerClass: '.c-button',
                    maskId: '#c-mask'
                });

                var slideLeftBtn = document.querySelector('#c-button--slide-left');

                slideLeftBtn.addEventListener('click', function (e) {
                    e.preventDefault;
                    slideLeft.open();
                });


                /**
                 * Slide right instantiation and action.
                 */
                var slideRight = new Menu({
                    wrapper: '#o-wrapper',
                    type: 'slide-right',
                    menuOpenerClass: '.c-button',
                    maskId: '#c-mask'
                });

                var slideRightBtn = document.querySelector('#c-button--slide-right');

                slideRightBtn.addEventListener('click', function (e) {
                    e.preventDefault;
                    slideRight.open();
                });



                 /**
   * Push left instantiation and action.
   */
  var pushLeft = new Menu({
    wrapper: '#o-wrapper',
    type: 'push-left',
    menuOpenerClass: '.c-button',
    maskId: '#c-mask'
  });

  var pushLeftBtn = document.querySelector('#c-button--push-left');
  
  pushLeftBtn.addEventListener('click', function(e) {
    e.preventDefault;
    pushLeft.open();
  });

        </script>


        <script type="text/javascript" src="js/mapa/before.load.js"></script>
        <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true&amp;key=AIzaSyB8XfU1TcwgKidv4ZKg1xSxgE8pLLBFy1M"></script>

        <script type="text/javascript" src="js/mapa/jquery-migrate-1.2.1.min.js"></script>
        <script type="text/javascript" src="js/mapa/markerclusterer.js"></script>
        <script type="text/javascript" src="js/mapa/bootstrap.min.js"></script>
        <script type="text/javascript" src="js/mapa/richmarker-compiled.js"></script>
        <script type="text/javascript" src="js/mapa/smoothscroll.js"></script>
        <script type="text/javascript" src="js/mapa/infobox.js"></script>


        <script type="text/javascript" src="js/mapa/jquery.mCustomScrollbar.concat.min.js"></script>

        <script type="text/javascript" src="js/mapa/maps_mobile.js"></script>
        <script type="text/javascript" src="js/mapa/custom.js"></script>

        <script>


 function nuevo_rincon() {
                    $.ajax({
                        type: 'POST',
                        async: true,
                        dataType: 'html',
                        cache: false,
                        url: 'http://misrincones.trabajocreativo.com/assets/external/_nuevo_rincon_app_vacio.php',
                        success: function (data) {
                            $('body').append(data);
                        },
                        beforeSend: function () {
                            document.getElementById("volver_atras").style.display = "none";
                            SimularClick('cerrar_izquierda');
                            $('#loading').show();
                        },
                        complete: function () {
                            document.getElementById("volver_atras").style.display = "block";
                            $('#loading').hide();
                        }
                    });
                }


                function quickView(id) {
                    $.ajax({
                        type: 'POST',
                        async: true,
                        dataType: 'html',
                        cache: false,
                        url: 'http://misrincones.trabajocreativo.com/assets/external/_modal_app.php?id=' + id,
                        data: id,
                        success: function (data) {
                            $('body').append(data);
                        },
                        beforeSend: function () {
                             $('.modal-window').remove();
                            document.getElementById("volver_atras").style.display = "none";
                            SimularClick('cerrar_derecha');
                            $('#loading').show();
                        },
                        complete: function () {
                            document.getElementById("volver_atras").style.display = "block";
                            $('#loading').hide();
                        }
                    });
                }


                // var _latitude = 42.599052;
                //var _longitude = -5.5665905;
                var zoom = 16;
                var jsonPath = 'http://misrincones.trabajocreativo.com/lugares/todos.json';

                // Load JSON data and create Google Maps


                var _latitude, _longitude;
                $(document).ready(function () {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(handle_geolocation_query, handle_errors);
                    } else {
                        alert('Device probably not ready.');
                    }
                });
                function handle_errors(error) {
                    // error handling here
                }
                function handle_geolocation_query(position) {
                    _latitude = (position.coords.latitude);
                    _longitude = (position.coords.longitude);
                    onPositionReady();
                }


                function obtener() {
                    navigator.geolocation.getCurrentPosition(mostrar);
                }
                function mostrar(posicion) {
                    var _latitude = posicion.coords.latitude;
                    var _longitude = posicion.coords.longitude;
                }


                function crear_mapa_json(categoria)
                {
                    //var _latitude = 42.599052;
                    //var _longitude = -5.5665905;

                    var zoom = 15;
                    var jsonPath = 'http://misrincones.trabajocreativo.com/lugares/' + categoria + '.json';
                    {
                        $.getJSON(jsonPath)
                                .done(function (json) {
                                    createHomepageGoogleMap(_latitude, _longitude, json, zoom);

                                })

                                ;
                    }
                }

                function onPositionReady() {
                    crear_mapa_json('todos');
                    // proceed
                }

                crear_mapa_json('todos');
        </script>

        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/capture.js"></script>
        <script type="text/javascript" src="js/camera.js"></script>
        <script type="text/javascript" src="js/geolocation.js"></script>

        <script type="text/javascript">
                app.initialize();
        </script>



    </body>





</html>
